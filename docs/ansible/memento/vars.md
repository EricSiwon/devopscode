# Vars

## Default Value

> Passer **true** comme second paramètre renverra la valeur par défaut si la valeur est définie mais vide

```yaml
"{{ some_variable | default(5) }}"
"{{ lookup('env', 'MY_USER') | default('admin', true) }}"
```

## Optional Variable

```yaml
"{{ item.mode | default(omit) }}"
```

## Mandatory Variables

```yaml
"{{ variable | mandatory }}"
```

## Test if,then,else : ternary

> Si le test est à true, *restart* sinon *continue*

```yaml
"{{ (status == 'needs_restart') | ternary('restart', 'continue') }}"
```

## Test if,then,else,null : ternary (omit)

> Si le test est à true, *restart* sinon *continue* et *null* (omit) si status est non initialisé

```yaml
"{{ (status == 'needs_restart') | ternary('restart', 'continue'), omit }}"
```

## Multiples tests

``` yaml title="CheckVars" linenums="1"
--8<-- "docs/playbooks/vars.yml"
```

``` text title=""
TASK [debug] **************
ok: [localhost] => {
    "msg": {
        "a_0": {
            "is bool": "False",
            "is float": "False",
            "is integer": "True",
            "is iterable": "False",
            "is mapping": "False",
            "is number": "True",
            "is same when cast to bool": "False",
            "is same when cast to float": "False",
            "is same when cast to integer": "True",
            "is same when cast to string": "True",
            "is sequence": "False",
            "is string": "False",
            "type_debug": "int",
            "value": "0",
            "value cast as bool": "False",
            "value cast as float": "0.0",
            "value cast as integer": "0",
            "value cast as string": "0"
        },
        "a_1": {
            "is bool": "False",
            "is float": "False",
            "is integer": "True",
            "is iterable": "False",
            "is mapping": "False",
            "is number": "True",
            "is same when cast to bool": "False",
            "is same when cast to float": "False",
            "is same when cast to integer": "True",
            "is same when cast to string": "True",
            "is sequence": "False",
            "is string": "False",
            "type_debug": "int",
            "value": "1",
            "value cast as bool": "True",
            "value cast as float": "1.0",
            "value cast as integer": "1",
            "value cast as string": "1"
        },
        "a_false": {
            "is bool": "True",
            "is float": "False",
            "is integer": "False",
            "is iterable": "False",
            "is mapping": "False",
            "is number": "True",
            "is same when cast to bool": "True",
            "is same when cast to float": "False",
            "is same when cast to integer": "False",
            "is same when cast to string": "True",
            "is sequence": "False",
            "is string": "False",
            "type_debug": "bool",
            "value": "False",
            "value cast as bool": "False",
            "value cast as float": "0.0",
            "value cast as integer": "0",
            "value cast as string": "False"
        },
        "a_false_caps": {
            "is bool": "True",
            "is float": "False",
            "is integer": "False",
            "is iterable": "False",
            "is mapping": "False",
            "is number": "True",
            "is same when cast to bool": "True",
            "is same when cast to float": "False",
            "is same when cast to integer": "False",
            "is same when cast to string": "True",
            "is sequence": "False",
            "is string": "False",
            "type_debug": "bool",
            "value": "False",
            "value cast as bool": "False",
            "value cast as float": "0.0",
            "value cast as integer": "0",
            "value cast as string": "False"
        },
        "a_false_initial_caps": {
            "is bool": "True",
            "is float": "False",
            "is integer": "False",
            "is iterable": "False",
            "is mapping": "False",
            "is number": "True",
            "is same when cast to bool": "True",
            "is same when cast to float": "False",
            "is same when cast to integer": "False",
            "is same when cast to string": "True",
            "is sequence": "False",
            "is string": "False",
            "type_debug": "bool",
            "value": "False",
            "value cast as bool": "False",
            "value cast as float": "0.0",
            "value cast as integer": "0",
            "value cast as string": "False"
        },
        "a_no": {
            "is bool": "True",
            "is float": "False",
            "is integer": "False",
            "is iterable": "False",
            "is mapping": "False",
            "is number": "True",
            "is same when cast to bool": "True",
            "is same when cast to float": "False",
            "is same when cast to integer": "False",
            "is same when cast to string": "True",
            "is sequence": "False",
            "is string": "False",
            "type_debug": "bool",
            "value": "False",
            "value cast as bool": "False",
            "value cast as float": "0.0",
            "value cast as integer": "0",
            "value cast as string": "False"
        },
        "a_no_caps": {
            "is bool": "True",
            "is float": "False",
            "is integer": "False",
            "is iterable": "False",
            "is mapping": "False",
            "is number": "True",
            "is same when cast to bool": "True",
            "is same when cast to float": "False",
            "is same when cast to integer": "False",
            "is same when cast to string": "True",
            "is sequence": "False",
            "is string": "False",
            "type_debug": "bool",
            "value": "False",
            "value cast as bool": "False",
            "value cast as float": "0.0",
            "value cast as integer": "0",
            "value cast as string": "False"
        },
        "a_no_initial_caps": {
            "is bool": "True",
            "is float": "False",
            "is integer": "False",
            "is iterable": "False",
            "is mapping": "False",
            "is number": "True",
            "is same when cast to bool": "True",
            "is same when cast to float": "False",
            "is same when cast to integer": "False",
            "is same when cast to string": "True",
            "is sequence": "False",
            "is string": "False",
            "type_debug": "bool",
            "value": "False",
            "value cast as bool": "False",
            "value cast as float": "0.0",
            "value cast as integer": "0",
            "value cast as string": "False"
        },
        "a_string_0": {
            "is bool": "False",
            "is float": "False",
            "is integer": "False",
            "is iterable": "True",
            "is mapping": "False",
            "is number": "False",
            "is same when cast to bool": "False",
            "is same when cast to float": "False",
            "is same when cast to integer": "True",
            "is same when cast to string": "True",
            "is sequence": "True",
            "is string": "True",
            "type_debug": "AnsibleUnicode",
            "value": "0",
            "value cast as bool": "False",
            "value cast as float": "0.0",
            "value cast as integer": "0",
            "value cast as string": "0"
        },
        "a_string_1": {
            "is bool": "False",
            "is float": "False",
            "is integer": "False",
            "is iterable": "True",
            "is mapping": "False",
            "is number": "False",
            "is same when cast to bool": "False",
            "is same when cast to float": "False",
            "is same when cast to integer": "True",
            "is same when cast to string": "True",
            "is sequence": "True",
            "is string": "True",
            "type_debug": "AnsibleUnicode",
            "value": "1",
            "value cast as bool": "True",
            "value cast as float": "1.0",
            "value cast as integer": "1",
            "value cast as string": "1"
        },
        "a_string_false": {
            "is bool": "False",
            "is float": "False",
            "is integer": "False",
            "is iterable": "True",
            "is mapping": "False",
            "is number": "False",
            "is same when cast to bool": "False",
            "is same when cast to float": "False",
            "is same when cast to integer": "False",
            "is same when cast to string": "True",
            "is sequence": "True",
            "is string": "True",
            "type_debug": "AnsibleUnicode",
            "value": "false",
            "value cast as bool": "False",
            "value cast as float": "0.0",
            "value cast as integer": "0",
            "value cast as string": "false"
        },
        "a_string_false_caps": {
            "is bool": "False",
            "is float": "False",
            "is integer": "False",
            "is iterable": "True",
            "is mapping": "False",
            "is number": "False",
            "is same when cast to bool": "False",
            "is same when cast to float": "False",
            "is same when cast to integer": "False",
            "is same when cast to string": "True",
            "is sequence": "True",
            "is string": "True",
            "type_debug": "AnsibleUnicode",
            "value": "FALSE",
            "value cast as bool": "False",
            "value cast as float": "0.0",
            "value cast as integer": "0",
            "value cast as string": "FALSE"
        },
        "a_string_false_initial_caps": {
            "is bool": "False",
            "is float": "False",
            "is integer": "False",
            "is iterable": "True",
            "is mapping": "False",
            "is number": "False",
            "is same when cast to bool": "True",
            "is same when cast to float": "False",
            "is same when cast to integer": "False",
            "is same when cast to string": "True",
            "is sequence": "True",
            "is string": "True",
            "type_debug": "AnsibleUnicode",
            "value": "False",
            "value cast as bool": "False",
            "value cast as float": "0.0",
            "value cast as integer": "0",
            "value cast as string": "False"
        },
        "a_string_no": {
            "is bool": "False",
            "is float": "False",
            "is integer": "False",
            "is iterable": "True",
            "is mapping": "False",
            "is number": "False",
            "is same when cast to bool": "False",
            "is same when cast to float": "False",
            "is same when cast to integer": "False",
            "is same when cast to string": "True",
            "is sequence": "True",
            "is string": "True",
            "type_debug": "AnsibleUnicode",
            "value": "no",
            "value cast as bool": "False",
            "value cast as float": "0.0",
            "value cast as integer": "0",
            "value cast as string": "no"
        },
        "a_string_no_caps": {
            "is bool": "False",
            "is float": "False",
            "is integer": "False",
            "is iterable": "True",
            "is mapping": "False",
            "is number": "False",
            "is same when cast to bool": "False",
            "is same when cast to float": "False",
            "is same when cast to integer": "False",
            "is same when cast to string": "True",
            "is sequence": "True",
            "is string": "True",
            "type_debug": "AnsibleUnicode",
            "value": "NO",
            "value cast as bool": "False",
            "value cast as float": "0.0",
            "value cast as integer": "0",
            "value cast as string": "NO"
        },
        "a_string_no_initial_caps": {
            "is bool": "False",
            "is float": "False",
            "is integer": "False",
            "is iterable": "True",
            "is mapping": "False",
            "is number": "False",
            "is same when cast to bool": "False",
            "is same when cast to float": "False",
            "is same when cast to integer": "False",
            "is same when cast to string": "True",
            "is sequence": "True",
            "is string": "True",
            "type_debug": "AnsibleUnicode",
            "value": "No",
            "value cast as bool": "False",
            "value cast as float": "0.0",
            "value cast as integer": "0",
            "value cast as string": "No"
        },
        "a_string_true": {
            "is bool": "False",
            "is float": "False",
            "is integer": "False",
            "is iterable": "True",
            "is mapping": "False",
            "is number": "False",
            "is same when cast to bool": "False",
            "is same when cast to float": "False",
            "is same when cast to integer": "False",
            "is same when cast to string": "True",
            "is sequence": "True",
            "is string": "True",
            "type_debug": "AnsibleUnicode",
            "value": "true",
            "value cast as bool": "True",
            "value cast as float": "0.0",
            "value cast as integer": "0",
            "value cast as string": "true"
        },
        "a_string_true_caps": {
            "is bool": "False",
            "is float": "False",
            "is integer": "False",
            "is iterable": "True",
            "is mapping": "False",
            "is number": "False",
            "is same when cast to bool": "False",
            "is same when cast to float": "False",
            "is same when cast to integer": "False",
            "is same when cast to string": "True",
            "is sequence": "True",
            "is string": "True",
            "type_debug": "AnsibleUnicode",
            "value": "TRUE",
            "value cast as bool": "True",
            "value cast as float": "0.0",
            "value cast as integer": "0",
            "value cast as string": "TRUE"
        },
        "a_string_true_initial_caps": {
            "is bool": "False",
            "is float": "False",
            "is integer": "False",
            "is iterable": "True",
            "is mapping": "False",
            "is number": "False",
            "is same when cast to bool": "True",
            "is same when cast to float": "False",
            "is same when cast to integer": "False",
            "is same when cast to string": "True",
            "is sequence": "True",
            "is string": "True",
            "type_debug": "AnsibleUnicode",
            "value": "True",
            "value cast as bool": "True",
            "value cast as float": "0.0",
            "value cast as integer": "0",
            "value cast as string": "True"
        },
        "a_string_yes": {
            "is bool": "False",
            "is float": "False",
            "is integer": "False",
            "is iterable": "True",
            "is mapping": "False",
            "is number": "False",
            "is same when cast to bool": "False",
            "is same when cast to float": "False",
            "is same when cast to integer": "False",
            "is same when cast to string": "True",
            "is sequence": "True",
            "is string": "True",
            "type_debug": "AnsibleUnicode",
            "value": "yes",
            "value cast as bool": "True",
            "value cast as float": "0.0",
            "value cast as integer": "0",
            "value cast as string": "yes"
        },
        "a_string_yes_caps": {
            "is bool": "False",
            "is float": "False",
            "is integer": "False",
            "is iterable": "True",
            "is mapping": "False",
            "is number": "False",
            "is same when cast to bool": "False",
            "is same when cast to float": "False",
            "is same when cast to integer": "False",
            "is same when cast to string": "True",
            "is sequence": "True",
            "is string": "True",
            "type_debug": "AnsibleUnicode",
            "value": "Yes",
            "value cast as bool": "True",
            "value cast as float": "0.0",
            "value cast as integer": "0",
            "value cast as string": "Yes"
        },
        "a_string_yes_initial_caps": {
            "is bool": "False",
            "is float": "False",
            "is integer": "False",
            "is iterable": "True",
            "is mapping": "False",
            "is number": "False",
            "is same when cast to bool": "False",
            "is same when cast to float": "False",
            "is same when cast to integer": "False",
            "is same when cast to string": "True",
            "is sequence": "True",
            "is string": "True",
            "type_debug": "AnsibleUnicode",
            "value": "Yes",
            "value cast as bool": "True",
            "value cast as float": "0.0",
            "value cast as integer": "0",
            "value cast as string": "Yes"
        },
        "a_true": {
            "is bool": "True",
            "is float": "False",
            "is integer": "False",
            "is iterable": "False",
            "is mapping": "False",
            "is number": "True",
            "is same when cast to bool": "True",
            "is same when cast to float": "False",
            "is same when cast to integer": "False",
            "is same when cast to string": "True",
            "is sequence": "False",
            "is string": "False",
            "type_debug": "bool",
            "value": "True",
            "value cast as bool": "True",
            "value cast as float": "1.0",
            "value cast as integer": "1",
            "value cast as string": "True"
        },
        "a_true_caps": {
            "is bool": "True",
            "is float": "False",
            "is integer": "False",
            "is iterable": "False",
            "is mapping": "False",
            "is number": "True",
            "is same when cast to bool": "True",
            "is same when cast to float": "False",
            "is same when cast to integer": "False",
            "is same when cast to string": "True",
            "is sequence": "False",
            "is string": "False",
            "type_debug": "bool",
            "value": "True",
            "value cast as bool": "True",
            "value cast as float": "1.0",
            "value cast as integer": "1",
            "value cast as string": "True"
        },
        "a_true_initial_caps": {
            "is bool": "True",
            "is float": "False",
            "is integer": "False",
            "is iterable": "False",
            "is mapping": "False",
            "is number": "True",
            "is same when cast to bool": "True",
            "is same when cast to float": "False",
            "is same when cast to integer": "False",
            "is same when cast to string": "True",
            "is sequence": "False",
            "is string": "False",
            "type_debug": "bool",
            "value": "True",
            "value cast as bool": "True",
            "value cast as float": "1.0",
            "value cast as integer": "1",
            "value cast as string": "True"
        },
        "a_yes": {
            "is bool": "True",
            "is float": "False",
            "is integer": "False",
            "is iterable": "False",
            "is mapping": "False",
            "is number": "True",
            "is same when cast to bool": "True",
            "is same when cast to float": "False",
            "is same when cast to integer": "False",
            "is same when cast to string": "True",
            "is sequence": "False",
            "is string": "False",
            "type_debug": "bool",
            "value": "True",
            "value cast as bool": "True",
            "value cast as float": "1.0",
            "value cast as integer": "1",
            "value cast as string": "True"
        },
        "a_yes_caps": {
            "is bool": "False",
            "is float": "False",
            "is integer": "False",
            "is iterable": "True",
            "is mapping": "False",
            "is number": "False",
            "is same when cast to bool": "False",
            "is same when cast to float": "False",
            "is same when cast to integer": "False",
            "is same when cast to string": "True",
            "is sequence": "True",
            "is string": "True",
            "type_debug": "AnsibleUnicode",
            "value": "TES",
            "value cast as bool": "False",
            "value cast as float": "0.0",
            "value cast as integer": "0",
            "value cast as string": "TES"
        },
        "a_yes_initial_caps": {
            "is bool": "False",
            "is float": "False",
            "is integer": "False",
            "is iterable": "True",
            "is mapping": "False",
            "is number": "False",
            "is same when cast to bool": "False",
            "is same when cast to float": "False",
            "is same when cast to integer": "False",
            "is same when cast to string": "True",
            "is sequence": "True",
            "is string": "True",
            "type_debug": "AnsibleUnicode",
            "value": "Tes",
            "value cast as bool": "False",
            "value cast as float": "0.0",
            "value cast as integer": "0",
            "value cast as string": "Tes"
        }
    }
}
```
